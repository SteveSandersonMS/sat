identifier: com.suborbital.constd
appVersion: v0.0.1
atmoVersion: v0.4.2

authentication:
  domains:
    api.github.com:
      headerType: bearer
      value: env(GITHUB_TOKEN)

handlers:
  - type: request
    resource: /hello
    method: POST
    steps:
      - fn: helloworld-rs
  
  - type: request
    resource: /hello/:key
    method: POST
    steps:
      - fn: helloworld-rs
      - fn: cache-set
      - fn: cache-get

  - type: request
    resource: /set/:key
    method: POST
    steps:
      - fn: cache-set
  
  - type: request
    resource: /get/:key
    method: GET
    steps:
      - fn: cache-get